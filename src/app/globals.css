@import "tailwindcss";

@plugin 'tailwindcss-animate';

/* @custom-variant dark (&:is(.dark *)); */

@theme {
  --font-sans: var(--font-geist-sans), ui-sans-serif, system-ui, sans-serif;
  --font-mono: var(--font-geist-mono), ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, monospace;
  --font-pixel: var(--font-pixel), "Press Start 2P", monospace;
  --color-border: hsl(var(--border));
  --color-input: hsl(var(--input));
  --color-ring: hsl(var(--ring));
  --color-background: hsl(var(--background));
  --color-foreground: hsl(var(--foreground));

  --color-primary: hsl(var(--primary));
  --color-primary-foreground: hsl(var(--primary-foreground));

  --color-secondary: hsl(var(--secondary));
  --color-secondary-foreground: hsl(var(--secondary-foreground));

  --color-destructive: hsl(var(--destructive));
  --color-destructive-foreground: hsl(var(--destructive-foreground));

  --color-muted: hsl(var(--muted));
  --color-muted-foreground: hsl(var(--muted-foreground));

  --color-accent: hsl(var(--accent));
  --color-accent-foreground: hsl(var(--accent-foreground));

  --color-popover: hsl(var(--popover));
  --color-popover-foreground: hsl(var(--popover-foreground));

  --color-card: hsl(var(--card));
  --color-card-foreground: hsl(var(--card-foreground));

  --radius-lg: var(--radius);
  --radius-md: calc(var(--radius) - 2px);
  --radius-sm: calc(var(--radius) - 4px);

  --animate-accordion-down: accordion-down 0.2s ease-out;
  --animate-accordion-up: accordion-up 0.2s ease-out;

  @keyframes accordion-down {
    from {
      height: 0;
    }
    to {
      height: var(--radix-accordion-content-height);
    }
  }
  @keyframes accordion-up {
    from {
      height: var(--radix-accordion-content-height);
    }
    to {
      height: 0;
    }
  }
}

/*
  The default border color has changed to `currentColor` in Tailwind CSS v4,
  so we've added these compatibility styles to make sure everything still
  looks the same as it did with Tailwind CSS v3.

  If we ever want to remove these styles, we need to add an explicit border
  color utility to any element that depends on these defaults.
*/
@layer base {
  *,
  ::after,
  ::before,
  ::backdrop,
  ::file-selector-button {
    border-color: var(--color-gray-200, currentColor);
  }
}

@layer base {
  :root {
    --background: 0 0% 100%;
    --foreground: 240 10% 3.9%;
    --card: 0 0% 100%;
    --card-foreground: 240 10% 3.9%;
    --popover: 0 0% 100%;
    --popover-foreground: 240 10% 3.9%;
    --primary: 240 5.9% 10%;
    --primary-foreground: 0 0% 98%;
    --secondary: 240 4.8% 95.9%;
    --secondary-foreground: 240 5.9% 10%;
    --muted: 240 4.8% 95.9%;
    --muted-foreground: 240 3.8% 46.1%;
    --accent: 240 4.8% 95.9%;
    --accent-foreground: 240 5.9% 10%;
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 0 0% 98%;
    --border: 240 5.9% 90%;
    --input: 240 5.9% 90%;
    --ring: 240 5.9% 10%;
    --radius: 0.75rem;
    --chart-1: 12 76% 61%;
    --chart-2: 173 58% 39%;
    --chart-3: 197 37% 24%;
    --chart-4: 43 74% 66%;
    --chart-5: 27 87% 67%;
    
    /* Terminal colors */
    --terminal-green: 142 71% 45%;
    --terminal-amber: 38 92% 50%;
    
    /* 8-bit Game colors */
    --game-bg: 230 25% 8%;
    --game-panel: 230 20% 12%;
    --game-border: 230 15% 25%;
    --game-cyan: 180 100% 50%;
    --game-magenta: 300 100% 60%;
    --game-yellow: 50 100% 50%;
    --game-green: 120 100% 40%;
    --game-red: 0 100% 50%;
    --game-blue: 210 100% 60%;
    --game-orange: 30 100% 50%;
    --game-purple: 270 100% 65%;
  }

  .dark {
    --background: 220 20% 4%;
    --foreground: 0 0% 95%;
    --card: 220 20% 6%;
    --card-foreground: 0 0% 95%;
    --popover: 220 20% 6%;
    --popover-foreground: 0 0% 95%;
    --primary: 0 0% 98%;
    --primary-foreground: 240 5.9% 10%;
    --secondary: 220 15% 12%;
    --secondary-foreground: 0 0% 98%;
    --muted: 220 15% 12%;
    --muted-foreground: 220 10% 55%;
    --accent: 220 15% 12%;
    --accent-foreground: 0 0% 98%;
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 0 0% 98%;
    --border: 220 15% 15%;
    --input: 220 15% 15%;
    --ring: 220 10% 70%;
    --chart-1: 220 70% 50%;
    --chart-2: 160 60% 45%;
    --chart-3: 30 80% 55%;
    --chart-4: 280 65% 60%;
    --chart-5: 340 75% 55%;
    
    /* Terminal colors */
    --terminal-green: 142 71% 45%;
    --terminal-amber: 38 92% 50%;
  }
}

.print-force-new-page {
  page-break-before: always;
}

/* ========================================
   ASCII Background Styles
   ======================================== */

.ascii-background {
  position: fixed;
  inset: 0;
  overflow: hidden;
  pointer-events: none;
  z-index: 0;
  opacity: 0.03;
}

.dark .ascii-background {
  opacity: 0.05;
}

.ascii-content {
  font-family: var(--font-mono);
  font-size: 10px;
  line-height: 1.2;
  color: currentColor;
  white-space: pre;
  user-select: none;
}

/* Fade effect at edges */
.ascii-background::before {
  content: "";
  position: absolute;
  inset: 0;
  background: radial-gradient(
    ellipse at center,
    transparent 0%,
    transparent 40%,
    hsl(var(--background)) 80%
  );
  pointer-events: none;
}

/* ========================================
   Terminal Styles
   ======================================== */

.terminal-container {
  font-family: var(--font-mono);
  font-size: 14px;
  line-height: 1.6;
  padding: 1.5rem;
  min-height: 100vh;
  max-height: 100vh;
  overflow-y: auto;
  position: relative;
  z-index: 1;
}

@media (min-width: 768px) {
  .terminal-container {
    padding: 2rem 3rem;
    font-size: 15px;
  }
}

.terminal-welcome {
  color: hsl(var(--terminal-green));
  margin-bottom: 1.5rem;
}

.terminal-entry {
  margin-bottom: 1rem;
}

.terminal-prompt,
.terminal-input-line {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 0;
}

.terminal-user {
  color: hsl(var(--terminal-green));
  font-weight: 600;
}

.terminal-at {
  color: hsl(var(--muted-foreground));
}

.terminal-host {
  color: hsl(142 71% 65%);
}

.terminal-separator {
  color: hsl(var(--muted-foreground));
}

.terminal-path {
  color: hsl(217 91% 60%);
  font-weight: 600;
}

.terminal-dollar {
  color: hsl(var(--muted-foreground));
  margin-left: 0.25rem;
  margin-right: 0.5rem;
}

.terminal-command {
  color: hsl(var(--foreground));
}

.terminal-output {
  white-space: pre-wrap;
  word-break: break-word;
  color: hsl(var(--foreground));
  margin-top: 0.5rem;
  padding-left: 0;
}

.terminal-error {
  color: hsl(0 84% 60%);
}

.terminal-input-line {
  margin-top: 0.5rem;
}

.terminal-input {
  flex: 1;
  min-width: 200px;
  background: transparent;
  border: none;
  outline: none;
  color: hsl(var(--foreground));
  font-family: inherit;
  font-size: inherit;
  caret-color: hsl(var(--terminal-green));
}

.terminal-input::placeholder {
  color: hsl(var(--muted-foreground));
}

/* Blinking cursor */
.terminal-cursor {
  display: inline-block;
  width: 8px;
  height: 1.2em;
  background: hsl(var(--terminal-green));
  animation: blink 1s step-end infinite;
  vertical-align: text-bottom;
  margin-left: 2px;
}

@keyframes blink {
  0%, 50% {
    opacity: 1;
  }
  51%, 100% {
    opacity: 0;
  }
}

/* Hide cursor when input is focused (browser shows its own) */
.terminal-input:focus + .terminal-cursor {
  display: none;
}

/* Subtle scanline effect (optional) */
.terminal-container::after {
  content: "";
  position: fixed;
  inset: 0;
  pointer-events: none;
  background: repeating-linear-gradient(
    0deg,
    transparent,
    transparent 2px,
    rgba(0, 0, 0, 0.015) 2px,
    rgba(0, 0, 0, 0.015) 4px
  );
  z-index: 100;
}

.dark .terminal-container::after {
  background: repeating-linear-gradient(
    0deg,
    transparent,
    transparent 2px,
    rgba(255, 255, 255, 0.008) 2px,
    rgba(255, 255, 255, 0.008) 4px
  );
}

/* Custom scrollbar for terminal */
.terminal-container::-webkit-scrollbar {
  width: 8px;
}

.terminal-container::-webkit-scrollbar-track {
  background: transparent;
}

.terminal-container::-webkit-scrollbar-thumb {
  background: hsl(var(--muted-foreground) / 0.3);
  border-radius: 4px;
}

.terminal-container::-webkit-scrollbar-thumb:hover {
  background: hsl(var(--muted-foreground) / 0.5);
}

/* ========================================
   Navigation Styles (Linear-inspired)
   ======================================== */

.nav-container {
  position: fixed;
  top: 1rem;
  right: 1rem;
  z-index: 50;
}

@media (min-width: 768px) {
  .nav-container {
    top: 1.5rem;
    right: 1.5rem;
  }
}

.nav-inner {
  display: flex;
  align-items: center;
  gap: 0.125rem;
  padding: 0.25rem;
  background: hsl(var(--background) / 0.8);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  border: 1px solid hsl(var(--border) / 0.5);
  border-radius: 9999px;
  box-shadow: 
    0 1px 2px hsl(var(--foreground) / 0.04),
    0 4px 12px hsl(var(--foreground) / 0.04);
}

.dark .nav-inner {
  background: hsl(var(--background) / 0.7);
  border-color: hsl(var(--border) / 0.3);
  box-shadow: 
    0 1px 2px hsl(0 0% 0% / 0.2),
    0 4px 16px hsl(0 0% 0% / 0.3),
    inset 0 1px 0 hsl(var(--foreground) / 0.03);
}

.nav-item {
  display: flex;
  align-items: center;
  gap: 0.375rem;
  padding: 0.5rem 0.75rem;
  border-radius: 9999px;
  font-size: 0.8125rem;
  font-weight: 500;
  color: hsl(var(--muted-foreground));
  transition: all 0.15s ease;
  cursor: pointer;
  background: transparent;
  border: none;
  text-decoration: none;
}

.nav-item:hover {
  color: hsl(var(--foreground));
  background: hsl(var(--muted) / 0.8);
}

.nav-item-active {
  color: hsl(var(--foreground));
  background: hsl(var(--muted));
}

.nav-icon {
  width: 1rem;
  height: 1rem;
  flex-shrink: 0;
}

.nav-label {
  display: none;
}

@media (min-width: 640px) {
  .nav-label {
    display: inline;
  }
}

.nav-divider {
  width: 1px;
  height: 1rem;
  background: hsl(var(--border));
  margin: 0 0.25rem;
}

/* ========================================
   8-bit Game Styles
   ======================================== */

.game-container {
  font-family: var(--font-pixel);
  min-height: 100vh;
  background: linear-gradient(180deg, hsl(230 25% 6%) 0%, hsl(230 25% 10%) 100%);
  padding: 1rem;
  padding-bottom: 5rem;
  position: relative;
  overflow-x: hidden;
}

/* Pixel border mixin via box-shadow */
.pixel-border {
  border: 4px solid hsl(var(--game-border));
  box-shadow:
    4px 4px 0 0 hsl(var(--game-border)),
    -4px -4px 0 0 hsl(230 15% 35%),
    inset 2px 2px 0 0 hsl(230 15% 20%);
}

.pixel-border-cyan {
  border-color: hsl(var(--game-cyan));
  box-shadow:
    4px 4px 0 0 hsl(180 100% 30%),
    inset 2px 2px 0 0 hsl(180 100% 70%);
}

.pixel-border-yellow {
  border-color: hsl(var(--game-yellow));
  box-shadow:
    4px 4px 0 0 hsl(50 100% 30%),
    inset 2px 2px 0 0 hsl(50 100% 70%);
}

.pixel-border-magenta {
  border-color: hsl(var(--game-magenta));
  box-shadow:
    4px 4px 0 0 hsl(300 100% 40%),
    inset 2px 2px 0 0 hsl(300 100% 80%);
}

.pixel-border-green {
  border-color: hsl(var(--game-green));
  box-shadow:
    4px 4px 0 0 hsl(120 100% 25%),
    inset 2px 2px 0 0 hsl(120 100% 60%);
}

/* Game Panel */
.game-panel {
  background: hsl(var(--game-panel));
  padding: 1rem;
  margin-bottom: 1rem;
}

/* Section Title */
.game-section-title {
  font-size: 0.625rem;
  letter-spacing: 0.05em;
  text-transform: uppercase;
  margin-bottom: 0.75rem;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.game-section-title::before,
.game-section-title::after {
  content: "";
  flex: 1;
  height: 2px;
  background: currentColor;
  opacity: 0.3;
}

/* Stat Bar */
.stat-bar {
  height: 12px;
  background: hsl(230 20% 15%);
  border: 2px solid hsl(var(--game-border));
  position: relative;
  overflow: hidden;
}

.stat-bar-fill {
  height: 100%;
  transition: width 0.5s ease-out;
}

.stat-bar-segments {
  position: absolute;
  inset: 0;
  display: flex;
}

.stat-bar-segments::after {
  content: "";
  position: absolute;
  inset: 0;
  background: repeating-linear-gradient(
    90deg,
    transparent 0px,
    transparent 8px,
    hsl(230 20% 10% / 0.5) 8px,
    hsl(230 20% 10% / 0.5) 10px
  );
}

/* Quest Item */
.quest-item {
  padding: 0.75rem;
  background: hsl(230 20% 8%);
  border-left: 3px solid hsl(var(--game-cyan));
  margin-bottom: 0.5rem;
  transition: all 0.2s;
}

.quest-item:hover {
  background: hsl(230 20% 10%);
  border-left-color: hsl(var(--game-yellow));
}

.quest-item.active {
  border-left-color: hsl(var(--game-green));
  animation: pulse-glow 2s ease-in-out infinite;
}

@keyframes pulse-glow {
  0%, 100% {
    box-shadow: 0 0 5px hsl(var(--game-green) / 0.3);
  }
  50% {
    box-shadow: 0 0 15px hsl(var(--game-green) / 0.6);
  }
}

/* Inventory Grid */
.inventory-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 0.75rem;
}

.inventory-item {
  aspect-ratio: 1;
  background: hsl(230 20% 8%);
  border: 2px solid hsl(var(--game-border));
  padding: 0.5rem;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  transition: all 0.2s;
  cursor: pointer;
}

.inventory-item:hover {
  border-color: hsl(var(--game-cyan));
  transform: translateY(-2px);
}

.inventory-item-icon {
  font-size: 1.5rem;
  margin-bottom: 0.25rem;
}

.inventory-item-name {
  font-size: 0.5rem;
  line-height: 1.4;
  overflow: hidden;
  text-overflow: ellipsis;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
}

/* Achievement Badge */
.achievement-badge {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  padding: 0.75rem;
  background: linear-gradient(135deg, hsl(50 100% 20% / 0.3), hsl(50 100% 10% / 0.2));
  border: 2px solid hsl(var(--game-yellow));
  margin-bottom: 0.5rem;
}

.achievement-icon {
  font-size: 1.5rem;
  flex-shrink: 0;
}

.achievement-info {
  flex: 1;
  min-width: 0;
}

.achievement-title {
  font-size: 0.5rem;
  color: hsl(var(--game-yellow));
  margin-bottom: 0.25rem;
}

.achievement-desc {
  font-size: 0.4rem;
  color: hsl(0 0% 70%);
  line-height: 1.5;
}

/* Character Avatar */
.character-avatar {
  width: 80px;
  height: 80px;
  border: 4px solid hsl(var(--game-cyan));
  image-rendering: pixelated;
  background: hsl(230 20% 15%);
}

/* Bottom Navigation */
.game-nav {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  background: hsl(var(--game-panel));
  border-top: 4px solid hsl(var(--game-border));
  display: flex;
  justify-content: space-around;
  padding: 0.5rem 0;
  z-index: 50;
}

.game-nav-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.25rem;
  padding: 0.5rem 1rem;
  font-size: 0.5rem;
  color: hsl(0 0% 60%);
  background: none;
  border: none;
  cursor: pointer;
  transition: all 0.2s;
}

.game-nav-item:hover,
.game-nav-item.active {
  color: hsl(var(--game-cyan));
}

.game-nav-item svg {
  width: 20px;
  height: 20px;
}

/* Skill Tag */
.skill-tag {
  display: inline-block;
  padding: 0.25rem 0.5rem;
  font-size: 0.4rem;
  background: hsl(230 20% 15%);
  border: 1px solid hsl(var(--game-border));
  margin: 0.125rem;
  color: hsl(0 0% 80%);
}

/* Scanline overlay for CRT effect */
.game-scanlines {
  pointer-events: none;
  position: fixed;
  inset: 0;
  background: repeating-linear-gradient(
    0deg,
    transparent,
    transparent 2px,
    hsl(0 0% 0% / 0.03) 2px,
    hsl(0 0% 0% / 0.03) 4px
  );
  z-index: 100;
}

/* Flicker animation for retro feel */
@keyframes flicker {
  0%, 100% { opacity: 1; }
  92% { opacity: 1; }
  93% { opacity: 0.8; }
  94% { opacity: 1; }
  97% { opacity: 0.9; }
}

.game-flicker {
  animation: flicker 5s ease-in-out infinite;
}

/* Text styles */
.game-text-xs {
  font-size: 0.4rem;
  line-height: 1.6;
}

.game-text-sm {
  font-size: 0.5rem;
  line-height: 1.5;
}

.game-text-base {
  font-size: 0.625rem;
  line-height: 1.4;
}

.game-text-lg {
  font-size: 0.75rem;
  line-height: 1.3;
}

/* Color utilities */
.text-game-cyan { color: hsl(var(--game-cyan)); }
.text-game-magenta { color: hsl(var(--game-magenta)); }
.text-game-yellow { color: hsl(var(--game-yellow)); }
.text-game-green { color: hsl(var(--game-green)); }
.text-game-red { color: hsl(var(--game-red)); }
.text-game-blue { color: hsl(var(--game-blue)); }
.text-game-orange { color: hsl(var(--game-orange)); }
.text-game-purple { color: hsl(var(--game-purple)); }

.bg-game-cyan { background-color: hsl(var(--game-cyan)); }
.bg-game-magenta { background-color: hsl(var(--game-magenta)); }
.bg-game-yellow { background-color: hsl(var(--game-yellow)); }
.bg-game-green { background-color: hsl(var(--game-green)); }
.bg-game-red { background-color: hsl(var(--game-red)); }
.bg-game-blue { background-color: hsl(var(--game-blue)); }
.bg-game-orange { background-color: hsl(var(--game-orange)); }
.bg-game-purple { background-color: hsl(var(--game-purple)); }
